<event name="Goto WP{wp_idx}" persistent="true">
    <description>Autogenerated waypoint {wp_idx}</description>
    {conditions}
    <delay>1.0</delay> <!-- Delay to allow guidance/wp-distance to recalculate -->
    <set name="ap/heading-setpoint-select" value="1"/>
    <set name="ap/active-waypoint" value="{wp_idx}"/>
    <set name="guidance/target_wp_latitude_rad" value="{lat_rad}"/>
    <set name="guidance/target_wp_longitude_rad" value="{lon_rad}"/>
    <set name="ap/altitude_setpoint" value="{alt_ft}"/> <!-- Not sure why, but this doesn't work with unit="M" so we have to manually convert units to feet -->
    <set name="ap/altitude_hold" value="1"/>
    <notify>
        <property>ap/active-waypoint</property>
    </notify>
</event>
